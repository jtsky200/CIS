<!DOCTYPE html>
<html>
<head>
    <title>Manual Technical Database Test</title>
</head>
<body>
    <h1>Manual Test - Technical Database</h1>
    <div id="results"></div>

    <script>
        async function testDirect() {
            console.log('üß™ STARTING MANUAL TEST');
            
            const results = document.getElementById('results');
            
            try {
                // Step 1: Test API directly
                console.log('STEP 1: Testing API...');
                const response = await fetch('https://us-central1-cis-de.cloudfunctions.net/technicalDatabase');
                const data = await response.json();
                
                console.log('‚úÖ API returned:', data.documents.length, 'documents');
                results.innerHTML += `<p>‚úÖ API returned: ${data.documents.length} documents</p>`;
                
                // Step 2: Simulate loadTechnicalDatabase
                console.log('STEP 2: Simulating loadTechnicalDatabase()...');
                const documents = data.documents || [];
                
                console.log('‚úÖ Loaded', documents.length, 'documents');
                results.innerHTML += `<p>‚úÖ Loaded ${documents.length} documents</p>`;
                
                // Step 3: Try to display
                console.log('STEP 3: Attempting to display...');
                
                // This simulates what displayTechnicalDatabase would do
                let html = '<div style="border: 2px solid green; padding: 20px; margin: 10px 0;">';
                html += '<h2>Documents (' + documents.length + '):</h2>';
                
                documents.slice(0, 5).forEach(doc => {
                    html += `<div style="border: 1px solid #ddd; padding: 10px; margin: 5px 0;">`;
                    html += `<strong>${doc.name || doc.filename || 'Unknown'}</strong><br>`;
                    html += `<small>Category: ${doc.category || 'N/A'}</small>`;
                    html += `</div>`;
                });
                
                html += '<p>... and ' + (documents.length - 5) + ' more</p>';
                html += '</div>';
                
                results.innerHTML += html;
                console.log('‚úÖ Display completed');
                
            } catch (error) {
                console.error('‚ùå Error:', error);
                results.innerHTML += `<p>‚ùå Error: ${error.message}</p>`;
            }
        }
        
        // Run on load
        testDirect();
    </script>
</body>
</html>

